<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.7.0//EN"
    "http://gwtproject.org/doctype/2.7.0/gwt-module.dtd">

<module rename-to="gwtBeanValidatorsExample">
  <!-- Inherit the core Web Toolkit stuff. -->
  <inherits name="com.google.gwt.user.User" />

  <inherits name="com.google.gwt.activity.Activity" />

  <inherits name='com.google.gwt.user.theme.clean.Clean' />

  <!-- Other module inherits -->

  <!-- resources for css bundle -->
  <inherits name="com.google.gwt.resources.Resources" />

  <!-- localization support -->
  <inherits name="com.google.gwt.i18n.I18N" />

  <!-- apache commons lang3 -->
  <inherits name="org.apache.commons.GWTCommonsLang3" />

  <!-- apache commons validator -->
  <inherits name="org.apache.commons.GWTCommonsValidator" />

  <!-- gwt bean validators -->
  <inherits name="de.knightsoftnet.validators.GwtBeanValidators" />

  <!-- gwtp dynamic navigation -->
  <inherits name="de.knightsoftnet.navigation.GwtpDynamicNavigation" />

  <!-- gwt mt widgets -->
  <inherits name="de.knightsoftnet.mtwidgets.GwtMtWidgets" />

  <!-- gwt injection support -->
  <inherits name="com.google.gwt.inject.Inject"/>

  <!-- gwtp mvp support -->
  <inherits name='com.gwtplatform.mvp.MvpWithEntryPoint'/>

  <!-- html 5 push state support -->
  <inherits name="com.wallissoftware.pushstate.PushState" />

  <!-- German and English language with English as fallback       -->
  <extend-property name="locale" values="en" />
  <extend-property name="locale" values="de" />
  <set-property name="locale" value="en,de" />
  <set-property-fallback name="locale" value="en" />

  <set-configuration-property name="locale.useragent" value="Y" />
  <set-configuration-property name="locale.cookie" value="LOCALE" />
  <set-configuration-property name="locale.searchorder" value="queryparam,cookie,useragent" />

  <!-- pushstate is not supported by ie9, needn't compile this permutations -->
  <set-property name="history.pushStateSupported" value="no">
    <any>
      <when-property-is name="user.agent" value="ie9" />
    </any>
  </set-property>
  <!-- <set-property name="history.pushStateSupported" value="no" /> -->

  <set-configuration-property name="gwtp.prebootstrapper"
        value="de.knightsoftnet.validationexample.client.MyPreBootstrapper"/>

  <!-- Reduce compiled size by using striped code -->
  <set-property name="compiler.stackMode" value="strip" />

  <set-property name="gwt.logging.enabled" value="FALSE" />

  <!-- our own validation factory implementation with @GwtValidation entries for each bean we
    want to validate -->
  <replace-with class="de.knightsoftnet.validationexample.client.validation.ValidatorFactory">
    <when-type-is class="javax.validation.ValidatorFactory" />
  </replace-with>

  <!-- our own reflection factory implementation with @GwtValidation entries for each bean we
    need getter access by reflection -->
  <replace-with class="de.knightsoftnet.validationexample.client.validation.ReflectGetterFactory">
    <when-type-is class="de.knightsoftnet.validators.client.GwtReflectGetterFactoryInterface" />
  </replace-with>

  <generate-with class="de.knightsoftnet.navigation.rebind.VersionInfoGenerator">
    <when-type-assignable class="de.knightsoftnet.navigation.client.version.AbstractVersionInfo" />
  </generate-with>

  <!-- Specify the paths for translatable code -->
  <source path="client" />
  <source path="shared" />

  <set-configuration-property name="gin.ginjector.modules"
                              value="de.knightsoftnet.validationexample.client.gin.ClientModule"/>

</module>
